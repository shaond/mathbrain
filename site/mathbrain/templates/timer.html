<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>2 Unit, Extension 1, Extension 2 Exam Timer - Math Brain (mathbrain.com.au)</title>
	<meta name="description" content="">
	<meta name="author" content="">

	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<style>
	body {
	  padding-top: 60px;
	  padding-bottom: 40px;
	}
	</style>
	<link rel="stylesheet" href="/css/bootstrap-responsive.min.css">
	<link rel="stylesheet" href="/css/style.css">

	<script src="/js/libs/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<body>
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Math Brain</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li class="active"><a href="/exam">Exam Timer</a></li>
              <li><a href="/pastexampapers">Past Exam Papers</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <div class="row">

        <!-- exam question -->
        <div class="span-8">
            <!-- actual question image -->
            <h1 id="mbQuestionHeading"></h1>
            <br />
            <p class="question border center">
                <img id="mbQuestionImg" class="center" src="/img/mathbrain.png" alt="Exam question" />
                

            </p>
            <!-- / actual question image -->

            <p><br /></p>



        </div>
        <!-- /exam question -->

        <!-- The right hand sidebar goes here -->
        <div class="span-4">
            <!-- The JS time goes here -->
            <h1 id="mbQuestionMarks"><h1>
            <h1 id="mbQuestionTimerHeader" class="hidden">Allocated time</h1>
            <h1 id="mbQuestionTimer" class="red"></h1>
            <br />
            <h3 id="mbExamTimerHeader" class="hidden">Total time left</h3>
            <h3 id="mbExamTimer" class="blue"></h3>

            <hr id="mbButtonHR" class="hidden">

            <!-- Subject -->
            <span id="mbSelectSubject">
                <label for="subject">Select your subject</label>
                <select id="subject">
                  <option value="2" selected>2 Unit Mathematics</option>
                  <option value="3">3 Unit Mathematics</option>
                  <option value="4">4 Unit Mathematics</option>
                </select>
                <p class=""><button id="mbBegin" class="btn btn-primary btn-large btn-danger">Begin &raquo;</button></p>
            </span>

            <span id="mbNavQuestions" class="hidden">
                <p id="mbNav" class="">
                    <button id="mbPrevious" class="btn btn-primary btn-large hidden">&laquo; Previous</button>
                    <button id="mbNext" class="btn btn-primary btn-large">Next &raquo;</button>
                    <!-- <a id="mbFinish" class="btn btn-primary btn-large
                        hidden">Finished</a> -->
                </p>
            </span>
        </div>

        <!-- End the right hand sidebar -->

      </div>
      <!-- / row -->

      <hr>
      <footer>
        <p>&copy; Math Brain 2012</p>
      </footer>

    </div> <!-- /container -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/libs/jquery-1.7.2.min.js"><\/script>')</script>
<script src="/js/libs/bootstrap/bootstrap.min.js"></script>
<script src="/js/script.js"></script>

<!-- http://keith-wood.name/countdown.html -->
<script src="/js/libs/jquery.countdown.pack.js"></script>

<!-- event handling -->
<script>
$(document).ready(function() {

    // Returned question data will be stored
    var questions = {};

    // The questions that's current displayed on screen
    var qIndex = 0;

    // The subject we are doing
    var subject = 0;

    var displayQuestion = function(q) {
        $("#mbQuestionImg").attr("src", "/" + q.fields.question_img);
        $("#mbQuestionMarks").text(q.fields.mark + " marks");
        $("#mbQuestionHeading").text("Question " + q.fields.num);
        $("#mbQuestionTimer").countdown('destroy');

        if (parseInt(q.fields.mark) > 0) {
            switch (parseInt(subject)) {
                case 2:
                    // 2 Unit question
                    $("#mbQuestionTimer").countdown({until: (180/120 * parseInt(q.fields.mark) * 60), compact: true, format: 'MS'});
                    break;
                case 3:
                    // 3 Unit question
                    $("#mbQuestionTimer").countdown({until: (120/84 * parseInt(q.fields.mark) * 60), compact: true, format: 'MS'});
                    break;
                case 4:
                    // 4 Unit question
                    $("#mbQuestionTimer").countdown({until: (180/120 * parseInt(q.fields.mark) * 60), compact: true, format: 'MS'});
                    break;
            }
        }
        
    };

    // When someone clicks begin, we start
    // ask for questions and return a JSON obj
    $("#mbBegin").click(function() {

        // What subject are we doing?
        subject = $("#subject").val();

        // Change our UI elements
        $("#mbSelectSubject").hide().fadeOut("slow");
        $("#mbNavQuestions").removeClass("hidden");
        $("#mbExamTimerHeader").removeClass("hidden");
        $("#mbQuestionTimerHeader").removeClass("hidden");
        $("#mbButtonHR").removeClass("hidden");

        var DATAURL = "/buildexam/" + subject;

        $.ajax({
            url: DATAURL,
            async: false,
            dataType: 'json',
            success: function(data) {
                questions = data;
            }
        });

        // save questions to local storage
        saveQuestions(questions);
    
        // display the first question
        displayQuestion(questions[qIndex]);

        // pre-fetch
        prefetchImages(questions);

        // set the count down timer for the exam
        if (parseInt(subject) === 2) $("#mbExamTimer").countdown({until: '180m', compact: true, format: 'HMS'});
        if (parseInt(subject) === 3) $("#mbExamTimer").countdown({until: '120m', compact: true, format: 'HMS'});
        if (parseInt(subject) === 4) $("#mbExamTimer").countdown({until: '180m', compact: true, format: 'HMS'});

    });

    $("#mbNext").click(function() {
        if (qIndex < questions.length) {
            qIndex = qIndex + 1;
            displayQuestion(questions[qIndex]);
        }
        if (qIndex === (questions.length - 1)) {
            $("#mbNext").hide();
        }
        if (qIndex > 0) {
            $("#mbPrevious").removeClass("hidden");
        }
    }); 

    $("#mbPrevious").click(function() { 
        if (qIndex > 0) {
            qIndex = qIndex - 1;
            displayQuestion(questions[qIndex]);
        }
        if (qIndex !== (questions.length - 1)) {
            $("#mbNext").show();
        }
        if (qIndex === 0) {
            $("#mbPrevious").addClass("hidden");
        }
    });

});
</script>
<!-- /event handling -->

<!-- google -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30615284-1']);
  _gaq.push(['_setDomainName', 'mathbrain.com.au']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- /google -->

</body>
</html>
